---
author: Esa Eslami
date: 7/01/2018
title: "COMPSCIX 415.2 Homework 4"
output: html_document
self-contained: true
---

```{r load_packages, warning=FALSE, message=FALSE, echo=FALSE}
library(tidyverse)
library(nycflights13)
library(gridExtra)

```

* * * 

####__Homework 4 Assignments:__####
__Complete these Exercises in R for Data Science:__  

Section 5.6.7: #2, #4 and #6 only. Extra Credit: Do #5
Section 10.5: #1, #2, #3 and #6 only
Section 12.3.3: #2, #3 and #4 only
Section 12.4.3: #1 and #2 only

* * * 

####5.6.7 Exercises:####

*2. Come up with another approach that will give you the same output as not_cancelled %>% count(dest) and not_cancelled %>% count(tailnum, wt = distance) (without using count()).*

__ANSWER:__ 

```{r 5_6_7_EX2, warning=FALSE, message=FALSE}
# First we need to create non_cancelled
not_cancelled <- flights %>% 
  filter(!is.na(dep_delay), !is.na(arr_delay))
# Now run not_cancelled %>% count(dest) to see what it looks like
not_cancelled %>% count(dest)
# We can get this same output using summarize() like this:
flights %>%
  filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
  group_by(dest) %>%
  summarize(not_cancelled = sum(!is.na(dep_delay)))
# Confirm that the output is identical:
countdest1 <- not_cancelled %>% count(dest)
countdest2 <- flights %>%
        filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
        group_by(dest) %>%
        summarize(not_cancelled = sum(!is.na(dep_delay)))
identical(countdest1$n,countdest2$not_cancelled)
# Similarly, we can use summarize() to get the same results from not_cancelled %>% count(tailnum, wt = distance) like this:
taildist1 <- not_cancelled %>% count(tailnum, wt = distance)
taildist2 <- flights %>%
        filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
        group_by(tailnum) %>%
        summarize(not_cancelled = sum(distance))
identical(taildist1$n,taildist2$not_cancelled)
```

- - - 

*4. Look at the number of cancelled flights per day. Is there a pattern? Is the proportion of cancelled flights related to the average delay?*

__ANSWER:__ 

```{r 5_6_7_EX4, warning=FALSE, message=FALSE}
# To answer this question, we first need to create a data set of relevant delay statistics:
delays <- flights %>%
        group_by(year, month, day) %>%
        summarize(count = n(),
                  cancelled = sum(is.na(dep_delay)),
                  avg_dep_delay = mean(mean(dep_delay,na.rm=TRUE)),
                  avg_arr_delay = mean(mean(arr_delay,na.rm=TRUE)))
# Now we can use ggplot to look into delay patterns
plot1 <- ggplot(data = delays, mapping = aes(x = cancelled, y = avg_dep_delay)) +
  geom_point(alpha = 1/3) +
  geom_smooth(se = FALSE)
plot2 <- ggplot(data = delays, mapping = aes(x = cancelled, y = avg_arr_delay)) +
  geom_point(alpha = 1/3) +
  geom_smooth(se = FALSE)
grid.arrange(plot1, plot2, ncol=2)
# We can see that for the most part, days with high average departure or arrival delays have higher numbers of cancelled flights. However, the relationship isn't linear and there are some clear outliers.
```

- - - 

*6. What does the sort argument to count() do. When might you use it?*

__ANSWER:__ 

```{r 5_6_7_EX6, warning=FALSE, message=FALSE}

```

####10.5 Exercises:####

*1. ?*

__ANSWER:__ 

```{r 10_5_EX1, warning=FALSE, message=FALSE}

```

- - - 

*2. ?*

__ANSWER:__ 

```{r 10_5_EX2, warning=FALSE, message=FALSE}

```

- - - 

*3. ?*

__ANSWER:__ 

```{r 10_5_EX3, warning=FALSE, message=FALSE}

```

- - - 

*6. ?*

__ANSWER:__ 

```{r 10_5_EX6, warning=FALSE, message=FALSE}

```

- - - 
####12.3.3 Exercises:####

*2. ?*

__ANSWER:__ 

```{r 12_3_3_EX2, warning=FALSE, message=FALSE}

```

- - - 

*3. ?*

__ANSWER:__ 

```{r 12_3_3_EX3, warning=FALSE, message=FALSE}

```

- - - 

*4. ?*

__ANSWER:__ 

```{r 12_3_3_EX4, warning=FALSE, message=FALSE}

```

- - - 

####12.4.3 Exercises:####

*1. ?*

__ANSWER:__ 

```{r 12_4_3_EX1, warning=FALSE, message=FALSE}

```

- - - 

*2. ?*

__ANSWER:__ 

```{r 12_4_3_EX2, warning=FALSE, message=FALSE}

```

- - - 

